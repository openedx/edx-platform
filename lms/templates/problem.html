<%page expression_filter="h"/>
<%!
from django.utils.translation import ugettext as _
from openedx.core.djangolib.markup import HTML
%>

<%namespace name='static' file='static_content.html'/>
<h3 class="hd hd-2 problem-header" id="${ id }-problem-title" aria-describedby="${ id }-problem-progress" tabindex="-1">
  ${ problem['name'] }
</h3>

<div class="problem-progress" id="${ id }-problem-progress"></div>

<div class="problem" aria-labelledby="${ id }-problem-title">
  ${ HTML(problem['html']) }
  <div class="action">
    <input type="hidden" name="problem_id" value="${ problem['name'] }" />
    % if demand_hint_possible:
    <div class="problem-hint" aria-live="polite"></div>
    % endif
    <div class="problem-action-buttons-wrapper">
    % if demand_hint_possible:
    <span class="problem-action-button-wrapper">
        <button class="hint-button problem-action-btn btn-default btn-small" data-value="${_('Hint')}"><span class="icon fa fa-question" aria-hidden="true"></span>${_('Hint')}</button>
    </span>
    % endif
    % if save_button:
    <span class="problem-action-button-wrapper">
        <button class="save problem-action-btn btn-default btn-small" data-value="${_('Save')}"><span class="icon fa fa-floppy-o" aria-hidden="true"></span><span aria-hidden="true">${_('Save')}</span><span class="sr">${_("Save your answer")}</span></button>
    </span>
    % endif
    % if reset_button:
    <span class="problem-action-button-wrapper">
        <button class="reset problem-action-btn btn-default btn-small" data-value="${_('Reset')}"><span class="icon fa fa-refresh" aria-hidden="true"></span><span aria-hidden="true">${_('Reset')}</span><span class="sr">${_("Reset your answer")}</span></button>
    </span>
    % endif
    % if answer_available:
    <span class="problem-action-button-wrapper">
        <button class="show problem-action-btn btn-default btn-small" aria-describedby="${ id }-problem-title"><span class="icon fa fa-exclamation-triangle" aria-hidden="true"></span><span class="show-label">${_('Show Answer')}</span></button>
    </span>
    % endif
    </div>
    <button type="button" class="submit btn-brand" data-submitting="${ submit_button_submitting }" data-value="${ submit_button }" aria-describedby="submission_feedback_${short_id}" ${'' if should_enable_submit_button else 'disabled'}
        % if attempts_allowed:
            data-attempts-remaining="${attempts_allowed - attempts_used}"
        % endif
    >
        <span class="submit-label" aria-hidden="true">${ submit_button }</span><span class="sr">${_("Submit your answer")}</span>
    </button>
    <div class="submission_feedback" aria-live="polite" id="submission_feedback_${short_id}">
    % if attempts_allowed:
        ${_("You have used {num_used} of {num_total} attempts").format(num_used=attempts_used, num_total=attempts_allowed)}
    % endif
    </div>

    % if answer_notification_type:
        % if 'correct' == answer_notification_type:
            <%include file="problem_notifications.html" args="
                notification_type='success',
                notification_icon='check',
                notification_message=_(answer_notification_message),
                hint_notification=hint_notification"
            />
        % endif
        % if 'incorrect' == answer_notification_type:
            <%include file="problem_notifications.html" args="
                notification_type='error',
                notification_icon='close',
                notification_message=_(answer_notification_message),
                hint_notification=hint_notification"
            />
        % endif
        % if 'partially-correct' == answer_notification_type:
            <%include file="problem_notifications.html" args="
                notification_type='success',
                notification_icon='asterisk',
                notification_message=_(answer_notification_message),
                hint_notification=hint_notification"
            />
        % endif
    % endif

  </div>
</div>
