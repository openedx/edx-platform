<%page args="gate_content, prereq_url, prereq_section_name, unit_name, score_reached, calculate_score" expression_filter="h"/>

<%!
from django.utils.translation import ugettext as _
from openedx.core.djangolib.markup import HTML, Text
%>

<div>
    <h2 class="hd hd-2 unit-title">
        <span class="icon fa fa-lock" aria-hidden="true">&nbsp</span>${unit_name}
    </h2>
    <hr>
    <h3>
        % if calculate_score:
            <span class="recalc-grade">
                <div class="ui-loading is-hidden">
                    <p>
                    <span class="spin">
                        <span class="icon fa fa-refresh" aria-hidden="true">
                        </span>
                    </span> 
                    <span class="copy">${Text(_(
                            "Calculating your score for {section_name}..."
                        )).format(
                            section_name=prereq_section_name
                        )}</span>
                    </p>
                </div> 
            </span>
        % elif score_reached:
            ${_("Score achieved!")}
        % else:
            ${_("Content Locked")}
        % endif
    </h3>
    <p>
        % if score_reached:
        <h3>
            <span class="icon fa fa-check-circle-o" aria-hidden="true">&nbsp</span>${_("Congratulations you have unlocked this section!")}
            <div id="loading-content" class="ui-loading is-hidden">
                    <p>
                    <span class="spin">
                        <span class="icon fa fa-refresh" aria-hidden="true">
                        </span>
                    </span> 
                    <span class="copy">${_("Loading content...")}</span>
                    </p>
            </div> 
        </h3>
        % elif not calculate_score:
            ${Text(_(
                "You must complete the section '{section_name}' with the required score before you are able to view this content."
            )).format(section_name=prereq_section_name)}
            <p>
                <button><a href="${prereq_url}">${_("Go to Prerequiste Section")}</a></button>
            </p>
            <p>
                <button><span class="recalc-grade">Recalculate Grade</span></button>
            </p>
        % endif
    </p>
</div>
