{"version":3,"sources":["webpack:///./common/static/js/vendor/jquery.cookie.js?f386*****","webpack:///./openedx/features/course_experience/static/course_experience/js/currency.js"],"names":["$","cookie","key","value","options","arguments","length","test","Object","prototype","toString","call","undefined","extend","expires","days","t","Date","setDate","getDate","String","document","encodeURIComponent","raw","toUTCString","path","domain","secure","join","decode","s","decodeURIComponent","pairs","split","i","pair","jQuery","Currency","price","l10nCookie","countryL10nData","lmsregex","priceText","text","regexMatch","exec","currentPrice","dollars","parseFloat","newPrice","rate","newPriceString","symbol","Math","round","code","each","editText","JSON","parse","e","SyntaxError","console","error","window","analytics","track","setPrice","ready","getCountry"],"mappings":"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","file":"Currency.js","sourcesContent":["/*!\n * jQuery Cookie Plugin\n * https://github.com/carhartl/jquery-cookie\n *\n * Copyright 2011, Klaus Hartl\n * Dual licensed under the MIT or GPL Version 2 licenses.\n * http://www.opensource.org/licenses/mit-license.php\n * http://www.opensource.org/licenses/GPL-2.0\n */\n(function($) {\n    $.cookie = function(key, value, options) {\n\n        // key and at least value given, set cookie...\n        if (arguments.length > 1 && (!/Object/.test(Object.prototype.toString.call(value)) || value === null || value === undefined)) {\n            options = $.extend({}, options);\n\n            if (value === null || value === undefined) {\n                options.expires = -1;\n            }\n\n            if (typeof options.expires === 'number') {\n                var days = options.expires, t = options.expires = new Date();\n                t.setDate(t.getDate() + days);\n            }\n\n            value = String(value);\n\n            return (document.cookie = [\n                encodeURIComponent(key), '=', options.raw ? value : encodeURIComponent(value),\n                options.expires ? '; expires=' + options.expires.toUTCString() : '', // use expires attribute, max-age is not supported by IE\n                options.path    ? '; path=' + options.path : '',\n                options.domain  ? '; domain=' + options.domain : '',\n                options.secure  ? '; secure' : ''\n            ].join(''));\n        }\n\n        // key and possibly options given, get cookie...\n        options = value || {};\n        var decode = options.raw ? function(s) { return s; } : decodeURIComponent;\n\n        var pairs = document.cookie.split('; ');\n        for (var i = 0, pair; pair = pairs[i] && pairs[i].split('='); i++) {\n            if (decode(pair[0]) === key) return decode(pair[1] || ''); // IE saves cookies with empty string as \"c; \", e.g. without \"=\" as opposed to EOMB, thus pair[1] may be undefined\n        }\n        return null;\n    };\n})(jQuery);\n\n\n\n// WEBPACK FOOTER //\n// ./common/static/js/vendor/jquery.cookie.js","import 'jquery.cookie';\nimport $ from 'jquery'; // eslint-disable-line import/extensions\n\nexport class Currency {  // eslint-disable-line import/prefer-default-export\n\n  editText(price) {\n    const l10nCookie = this.countryL10nData;\n    const lmsregex = /(\\$)([\\d|.]*)( USD)/g;\n    const priceText = price.text();\n    const regexMatch = lmsregex.exec(priceText);\n    if (regexMatch) {\n      const currentPrice = regexMatch[2];\n      const dollars = parseFloat(currentPrice);\n      const newPrice = dollars * l10nCookie.rate;\n      const newPriceString = `${l10nCookie.symbol}${Math.round(newPrice)} ${l10nCookie.code}`;\n      // Change displayed price based on edx-price-l10n cookie currency_data\n      price.text(newPriceString);\n    }\n  }\n\n  setPrice() {\n    $('.upgrade-price-string').each((i, price) => {\n      // When the button includes two prices (discounted and previous)\n      // we call the method twice, since it modifies one price at a time.\n      // Could also be used to modify all prices on any page\n      this.editText($(price));\n    });\n  }\n\n  getCountry() {\n    try {\n      this.countryL10nData = JSON.parse($.cookie('edx-price-l10n'));\n    } catch (e) {\n      if (e instanceof SyntaxError) {\n        // If cookie isn't proper JSON, log but continue. This will show the purchase experience\n        // in a non-local currency but will not prevent the user from interacting with the page.\n        console.error(e);\n        console.error(\"Ignoring malformed 'edx-price-l10n' cookie.\");\n      } else {\n        throw e;\n      }\n    }\n    if (this.countryL10nData) {\n      window.analytics.track('edx.bi.user.track_selection.local_currency_cookie_set');\n      this.setPrice();\n    }\n  }\n\n  constructor() {\n    $(document).ready(() => {\n      this.getCountry();\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./openedx/features/course_experience/static/course_experience/js/currency.js"],"sourceRoot":""}