{"version":3,"sources":["webpack:///./common/static/xmodule/modules/js/001-879b5ca9f0c8ae80045af7486d8d310d.js","webpack:///./common/static/xmodule/modules/js/002-3918b2d4f383c04fed8227cc9f523d6e.js?93bc***","webpack:///./common/static/xmodule/modules/js/003-b3206f2283964743c4772b9d72c67d64.js?f7fe****","webpack:///./~/scriptjs/dist/script.js?7154****"],"names":["Conditional","element","runtime","callerElId","dependencies","el","$","find","data","length","indexOf","url","render","prototype","postWithPrefix","_this","response","i","len","parentEl","parentId","ref","renderedFragments","html","fragments","push","renderXBlockFragment","console","log","parent","attr","message","hasClass","hide","show","when","apply","done","XBlock","initializeBlocks","fragment","content","resources","addXBlockFragmentResources","append","e","error","stack","Deferred","resolve","self","applyResource","numResources","deferred","index","hash","resource","value","promise","window","loadedXBlockResources","_","loadResource","fail","reject","$head","mimetype","kind","placement","loaded","$script","call","JavascriptLoader","executeModuleScripts","callback","callbackCalled","completed","completionHandlerGenerator","placeholders","results","allComplete","flag","undefined","each","placeholder","s","src","document","createElement","setAttribute","onload","appendChild","remove","Collapsible","setCollapsibles","toggleFull","toggleHint","linkBottom","linkTop","short_custom","elt","close_text","open_text","edx","joinHtml","HTML","gettext","click","event","$el","new_text","preventDefault","target","siblings","slideToggle","toggleClass","text"],"mappings":"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A;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,kCAAkC,OAAO;AACzC;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,6EAA6E,sBAAsB;AACnG;;AAEA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,iCAAiC,iBAAiB;AACvD;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;;AAEA;AACA,CAAC","file":"ConditionalBlockPreview.js","sourcesContent":["/*** IMPORTS FROM imports-loader ***/\n(function() {\n\n// Once generated by CoffeeScript 1.9.3, but now lives as pure JS\n/* eslint-disable */\n(function() {\n  this.Conditional = (function() {\n    function Conditional(element, runtime, callerElId) {\n      var dependencies;\n      this.el = $(element).find('.conditional-wrapper');\n      this.callerElId = callerElId;\n      if (callerElId !== void 0) {\n        dependencies = this.el.data('depends');\n        if ((typeof dependencies === 'string') && (dependencies.length > 0) && (dependencies.indexOf(callerElId) === -1)) {\n          return;\n        }\n      }\n      this.url = this.el.data('url');\n      if (this.url) {\n        this.render(element);\n      }\n    }\n\n    Conditional.prototype.render = function(element) {\n      return $.postWithPrefix(this.url + \"/conditional_get\", (function(_this) {\n        return function(response) {\n          var i, len, parentEl, parentId, ref, renderedFragments=[];\n          _this.el.html('');\n          fragments = response.fragments;\n          for (i = 0, len = fragments.length; i < len; i++) {\n            renderedFragments.push(_this.renderXBlockFragment(fragments[i]));\n            console.log(\"Started fragment loading\", fragments[i])\n          }\n          parentEl = $(element).parent();\n          parentId = parentEl.attr('id');\n          if (response.message === false) {\n            if (parentEl.hasClass('vert')) {\n              parentEl.hide();\n            } else {\n              $(element).hide();\n            }\n          } else {\n            if (parentEl.hasClass('vert')) {\n              parentEl.show();\n            } else {\n              $(element).show();\n            }\n          }\n\n          /*\n          The children are rendered with a new request, so they have a different request-token.\n          Use that token instead of @requestToken by simply not passing a token into initializeBlocks.\n          */\n          $.when.apply(null, renderedFragments).done(function() {\n              console.log(\"All fragments loaded, initializing blocks\");\n              XBlock.initializeBlocks(_this.el);\n          });\n        };\n      })(this));\n    };\n\n\n    /**\n    * Renders an xblock fragment into the specified element. The fragment has two attributes:\n    *   html: the HTML to be rendered\n    *   resources: any JavaScript or CSS resources that the HTML depends upon\n    * Note that the XBlock is rendered asynchronously, and so a promise is returned that\n    * represents this process.\n    * @param fragment The fragment returned from the xblock_handler\n    * @returns {Promise} A promise representing the rendering process\n    */\n    Conditional.prototype.renderXBlockFragment = function(fragment) {\n      var html = fragment.content,\n      resources = fragment.resources || [],\n      element = this.el;\n      // Render the HTML first as the scripts might depend upon it, and then\n      // asynchronously add the resources to the page. Any errors that are thrown\n      // by included scripts are logged to the console but are then ignored assuming\n      // that at least the rendered HTML will be in place.\n      try {\n        return this.addXBlockFragmentResources(resources).done(function () {\n          // We give XBlock fragments free-reign to add javascript and CSS to\n          // to the page, so XSS escaping doesn't matter much in this context\n          console.log(\"Fragment resources loaded, appending HTML\");\n          // xss-lint: disable=javascript-jquery-append\n          element.append(html);\n        });\n      } catch (e) {\n        console.error(e, e.stack);\n        return $.Deferred().resolve();\n      }\n    };\n\n    /**\n    * Dynamically loads all of an XBlock's dependent resources. This is an asynchronous\n    * process so a promise is returned.\n    * @param resources The resources to be rendered\n    * @returns {Promise} A promise representing the rendering process\n    */\n    Conditional.prototype.addXBlockFragmentResources = function(resources) {\n      var self = this;\n      var applyResource;\n      var numResources;\n      var deferred;\n      var numResources = resources.length;\n      var deferred = $.Deferred();\n\n      applyResource = function (index) {\n        var hash, resource, value, promise;\n        if (index >= numResources) {\n          deferred.resolve();\n          return;\n        }\n        resource = resources[index];\n        window.loadedXBlockResources = window.loadedXBlockResources || [];\n        if (_.indexOf(loadedXBlockResources, resource) < 0) {\n          promise = self.loadResource(resource);\n          loadedXBlockResources.push(resource);\n          promise.done(function () {\n            applyResource(index + 1);\n          }).fail(function () {\n            deferred.reject();\n          });\n        } else {\n          applyResource(index + 1);\n        }\n      };\n      applyResource(0);\n      return deferred.promise();\n    };\n\n    /**\n    * Loads the specified resource into the page.\n    * @param resource The resource to be loaded.\n    * @returns {Promise} A promise representing the loading of the resource.\n    */\n    Conditional.prototype.loadResource = function(resource) {\n      // We give XBlock fragments free-reign to add javascript and CSS to\n      // to the page, so XSS escaping doesn't matter much in this context\n      var $head = $('head'),\n      mimetype = resource.mimetype,\n      kind = resource.kind,\n      placement = resource.placement,\n      data = resource.data;\n      var loaded;\n      if (mimetype === 'text/css') {\n        if (kind === 'text') {\n          // xss-lint: disable=javascript-jquery-append,javascript-concat-html\n          $head.append(\"<style type='text/css'>\" + data + '</style>');\n        } else if (kind === 'url') {\n          // xss-lint: disable=javascript-jquery-append,javascript-concat-html\n          $head.append(\"<link rel='stylesheet' href='\" + data + \"' type='text/css'>\");\n        }\n      } else if (mimetype === 'application/javascript') {\n        if (kind === 'text') {\n            // xss-lint: disable=javascript-jquery-append,javascript-concat-html\n            $head.append('<script>' + data + '</script>');\n        } else if (kind === 'url') {\n          loaded = $.Deferred();\n          $script(data, data, function() {\n              loaded.resolve()\n          });\n          return loaded.promise();\n        }\n      } else if (mimetype === 'text/html') {\n        if (placement === 'head') {\n          // xss-lint: disable=javascript-jquery-append\n          $head.append(data);\n        }\n      }\n      // Return an already resolved promise for synchronous updates\n      return $.Deferred().resolve().promise();\n    };\n\n    return Conditional;\n\n  })();\n\n}).call(this);\n\n}.call(window));\n\n\n// WEBPACK FOOTER //\n// ./common/static/xmodule/modules/js/001-879b5ca9f0c8ae80045af7486d8d310d.js","/*** IMPORTS FROM imports-loader ***/\n(function() {\n\n(function() {\n    'use strict';\n    this.JavascriptLoader = (function() {\n        function JavascriptLoader() {\n        }\n\n        /**\n         * Set of library functions that provide common interface for javascript loading\n         * for all module types. All functionality provided by JavascriptLoader should take\n         * place at module scope, i.e. don't run jQuery over entire page.\n         *\n         * executeModuleScripts:\n         *     Scan the module ('el') for \"script_placeholder\"s, then:\n         *\n         *     1) Fetch each script from server\n         *     2) Explicitly attach the script to the <head> of document\n         *     3) Explicitly wait for each script to be loaded\n         *     4) Return to callback function when all scripts loaded\n         */\n        JavascriptLoader.executeModuleScripts = function(el, callback) {\n            var callbackCalled, completed, completionHandlerGenerator, loaded, placeholders;\n            if (!callback) {\n                callback = null; // eslint-disable-line no-param-reassign\n            }\n            placeholders = el.find('.script_placeholder');\n            if (placeholders.length === 0) {\n                if (callback !== null) {\n                    callback();\n                }\n                return [];\n            }\n            // TODO: Verify the execution order of multiple placeholders\n            completed = (function() {\n                var i, ref, results;\n                results = [];\n                for (i = 1, ref = placeholders.length; ref >= 1 ? i <= ref : i >= ref; ref >= 1 ? ++i : --i) {\n                    results.push(false);\n                }\n                return results;\n            }());\n            callbackCalled = false;\n            completionHandlerGenerator = function(index) {\n                return function() {\n                    var allComplete, flag, i, len;\n                    allComplete = true;\n                    completed[index] = true;\n                    for (i = 0, len = completed.length; i < len; i++) {\n                        flag = completed[i];\n                        if (!flag) {\n                            allComplete = false;\n                            break;\n                        }\n                    }\n                    if (allComplete && !callbackCalled) {\n                        callbackCalled = true;\n                        if (callback !== null) {\n                            return callback();\n                        }\n                    }\n                    return undefined;\n                };\n            };\n            // Keep a map of what sources we're loaded from, and don't do it twice.\n            loaded = {};\n            return placeholders.each(function(index, placeholder) {\n                var s, src;\n                // TODO: Check if the script already exists in DOM. If so, (1) copy it\n                // into memory; (2) delete the DOM script element; (3) reappend it.\n                // This would prevent memory bloat and save a network request.\n                src = $(placeholder).attr('data-src');\n                if (!(src in loaded)) {\n                    loaded[src] = true;\n                    s = document.createElement('script');\n                    s.setAttribute('src', src);\n                    s.setAttribute('type', 'text/javascript');\n                    s.onload = completionHandlerGenerator(index);\n                    // Need to use the DOM elements directly or the scripts won't execute properly.\n                    $('head')[0].appendChild(s);\n                } else {\n                    // just call the completion callback directly, without reloading the file\n                    completionHandlerGenerator(index)();\n                }\n                return $(placeholder).remove();\n            });\n        };\n\n        return JavascriptLoader;\n    }());\n}).call(this);\n\n}.call(window));\n\n\n// WEBPACK FOOTER //\n// ./common/static/xmodule/modules/js/002-3918b2d4f383c04fed8227cc9f523d6e.js","/*** IMPORTS FROM imports-loader ***/\n(function() {\n\n(function(undefined) {\n    'use strict';\n\n    // [module Collapsible]\n    //\n    // [description]\n    //     Set of library functions that provide a simple way to add\n    //     collapsible functionality to elements.\n    this.Collapsible = {\n        setCollapsibles: setCollapsibles,\n        toggleFull: toggleFull,\n        toggleHint: toggleHint\n    };\n\n    return;\n\n    // [function setCollapsibles]\n    //\n    // [description]\n    //     Scan element's content for generic collapsible containers.\n    //\n    // [params]\n    //     el: container\n    function setCollapsibles(el) {\n        var linkBottom, linkTop, short_custom;\n\n        linkTop = '<a href=\"#\" class=\"full full-top\">See full output</a>';\n        linkBottom = '<a href=\"#\" class=\"full full-bottom\">See full output</a>';\n\n        // Standard longform + shortfom pattern.\n        el.find('.longform').hide();\n        el.find('.shortform').append(linkTop, linkBottom); // xss-lint: disable=javascript-jquery-append\n\n        // Custom longform + shortform text pattern.\n        short_custom = el.find('.shortform-custom');\n\n        // Set up each one individually.\n        short_custom.each(function(index, elt) {\n            var close_text, open_text;\n\n            open_text = $(elt).data('open-text');\n            close_text = $(elt).data('close-text');\n            edx.HtmlUtils.append(\n                $(elt),\n                edx.HtmlUtils.joinHtml(\n                    edx.HtmlUtils.HTML(\"<a href='#' class='full-custom'>\"),\n                    gettext(open_text),\n                    edx.HtmlUtils.HTML('</a>')\n                )\n            );\n\n            $(elt).find('.full-custom').click(function(event) {\n                Collapsible.toggleFull(event, open_text, close_text);\n            });\n        });\n\n        // Collapsible pattern.\n        el.find('.collapsible header + section').hide();\n\n        // Set up triggers.\n        el.find('.full').click(function(event) {\n            Collapsible.toggleFull(event, 'See full output', 'Hide output');\n        });\n        el.find('.collapsible header a').click(Collapsible.toggleHint);\n    }\n\n    // [function toggleFull]\n    //\n    // [description]\n    //     Toggle the display of full text for a collapsible element.\n    //\n    // [params]\n    //     event: jQuery event object associated with the event that\n    //         triggered this callback function.\n    //     open_text: text that should be displayed when the collapsible\n    //         is open.\n    //     close_text: text that should be displayed when the collapsible\n    //         is closed.\n    function toggleFull(event, open_text, close_text) {\n        var $el, new_text, parent;\n\n        event.preventDefault();\n\n        parent = $(event.target).parent();\n        parent.siblings().slideToggle();\n        parent.parent().toggleClass('open');\n\n        if ($(event.target).text() === open_text) {\n            new_text = close_text;\n        } else {\n            new_text = open_text;\n        }\n\n        if ($(event.target).hasClass('full')) {\n            $el = parent.find('.full');\n        } else {\n            $el = $(event.target);\n        }\n\n        $el.text(new_text);\n    }\n\n    // [function toggleHint]\n    //\n    // [description]\n    //     Toggle the collapsible open to show the hint.\n    //\n    // [params]\n    //     event: jQuery event object associated with the event that\n    //         triggered this callback function.\n    function toggleHint(event) {\n        event.preventDefault();\n\n        $(event.target).parent().siblings().slideToggle();\n        $(event.target).parent().parent().toggleClass('open');\n    }\n}).call(this);\n\n}.call(window));\n\n\n// WEBPACK FOOTER //\n// ./common/static/xmodule/modules/js/003-b3206f2283964743c4772b9d72c67d64.js","/*!\n  * $script.js JS loader & dependency manager\n  * https://github.com/ded/script.js\n  * (c) Dustin Diaz 2014 | License MIT\n  */\n\n(function (name, definition) {\n  if (typeof module != 'undefined' && module.exports) module.exports = definition()\n  else if (typeof define == 'function' && define.amd) define(definition)\n  else this[name] = definition()\n})('$script', function () {\n  var doc = document\n    , head = doc.getElementsByTagName('head')[0]\n    , s = 'string'\n    , f = false\n    , push = 'push'\n    , readyState = 'readyState'\n    , onreadystatechange = 'onreadystatechange'\n    , list = {}\n    , ids = {}\n    , delay = {}\n    , scripts = {}\n    , scriptpath\n    , urlArgs\n\n  function every(ar, fn) {\n    for (var i = 0, j = ar.length; i < j; ++i) if (!fn(ar[i])) return f\n    return 1\n  }\n  function each(ar, fn) {\n    every(ar, function (el) {\n      return !fn(el)\n    })\n  }\n\n  function $script(paths, idOrDone, optDone) {\n    paths = paths[push] ? paths : [paths]\n    var idOrDoneIsDone = idOrDone && idOrDone.call\n      , done = idOrDoneIsDone ? idOrDone : optDone\n      , id = idOrDoneIsDone ? paths.join('') : idOrDone\n      , queue = paths.length\n    function loopFn(item) {\n      return item.call ? item() : list[item]\n    }\n    function callback() {\n      if (!--queue) {\n        list[id] = 1\n        done && done()\n        for (var dset in delay) {\n          every(dset.split('|'), loopFn) && !each(delay[dset], loopFn) && (delay[dset] = [])\n        }\n      }\n    }\n    setTimeout(function () {\n      each(paths, function loading(path, force) {\n        if (path === null) return callback()\n        \n        if (!force && !/^https?:\\/\\//.test(path) && scriptpath) {\n          path = (path.indexOf('.js') === -1) ? scriptpath + path + '.js' : scriptpath + path;\n        }\n        \n        if (scripts[path]) {\n          if (id) ids[id] = 1\n          return (scripts[path] == 2) ? callback() : setTimeout(function () { loading(path, true) }, 0)\n        }\n\n        scripts[path] = 1\n        if (id) ids[id] = 1\n        create(path, callback)\n      })\n    }, 0)\n    return $script\n  }\n\n  function create(path, fn) {\n    var el = doc.createElement('script'), loaded\n    el.onload = el.onerror = el[onreadystatechange] = function () {\n      if ((el[readyState] && !(/^c|loade/.test(el[readyState]))) || loaded) return;\n      el.onload = el[onreadystatechange] = null\n      loaded = 1\n      scripts[path] = 2\n      fn()\n    }\n    el.async = 1\n    el.src = urlArgs ? path + (path.indexOf('?') === -1 ? '?' : '&') + urlArgs : path;\n    head.insertBefore(el, head.lastChild)\n  }\n\n  $script.get = create\n\n  $script.order = function (scripts, id, done) {\n    (function callback(s) {\n      s = scripts.shift()\n      !scripts.length ? $script(s, id, done) : $script(s, callback)\n    }())\n  }\n\n  $script.path = function (p) {\n    scriptpath = p\n  }\n  $script.urlArgs = function (str) {\n    urlArgs = str;\n  }\n  $script.ready = function (deps, ready, req) {\n    deps = deps[push] ? deps : [deps]\n    var missing = [];\n    !each(deps, function (dep) {\n      list[dep] || missing[push](dep);\n    }) && every(deps, function (dep) {return list[dep]}) ?\n      ready() : !function (key) {\n      delay[key] = delay[key] || []\n      delay[key][push](ready)\n      req && req(missing)\n    }(deps.join('|'))\n    return $script\n  }\n\n  $script.done = function (idOrDone) {\n    $script([null], idOrDone)\n  }\n\n  return $script\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/scriptjs/dist/script.js\n// module id = ./node_modules/scriptjs/dist/script.js\n// module chunks = 7 8 9 11 21 32"],"sourceRoot":""}